#define CATCH_CONFIG_MAIN

#include "catch.hpp"
#include "njoy21.hpp"

using namespace njoy::njoy21::input;

SCENARIO( "bugless" ){
  std::string value(
      "123456789 123456789 123456789 123456789 123456789 123456789 ");
  iRecordStream<char> iss{ std::istringstream( "'" + value + "'" ) };
  PLOTR::Card10 card10( iss );
  REQUIRE( card10.aleg.value == value );
}

SCENARIO( "empty" ){
  GIVEN( "no input value" ){
    iRecordStream<char> iss{ std::istringstream( " /" ) };
    PLOTR::Card10 card10( iss );
    THEN( "the default is returned" ){

      REQUIRE( "" == card10.aleg.value );
    }
  }
}

SCENARIO( "bugged" ){
  GIVEN( "a string that's too long" ){
    std::string value(
      "123456789 123456789 123456789 123456789 123456789 123456789 1");
    iRecordStream<char> iss{ std::istringstream( "'" + value + "'" ) };
    REQUIRE_THROWS( PLOTR::Card10( iss ) );
  }
}
